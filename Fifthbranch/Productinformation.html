
<div class="container">
  <a href="productinformation.html" id="back-button">Back</a>
  <img src="../LetsPastaLogo.png" alt="Image">
  <h1>Scanning</h1>
  <br>
  <!-- Form element added -->
  <form id="input-form" action="#" method="post">
    <!-- Single input field for both location and product -->
    <label for="product-field">Product (minimum 12 characters):</label>
    <input type="text" id="product-field" autocomplete="off">
    <br>
    <!-- Submit button within the form -->
    <button type="button" class="button" id="submit-button">Submit</button>
  </form>
</div>

<script>
  // Get reference to product field and submit button
  const productField = document.getElementById("product-field");
  const submitButton = document.getElementById("submit-button");

  // Add event listener to product field for 'input' event
  productField.addEventListener("input", function(event) {
    event.preventDefault(); // Prevent default form submission behavior

    const value = event.target.value;
    if (value.length >= 12) {
      // Automatically submit the form
      submitForm();
    }
  });

  // Add event listener to submit button
  submitButton.addEventListener("click", function(event) {
    const value = productField.value.trim(); // Trim any leading/trailing spaces
    if (value.length < 12) {
      alert("Please enter at least 12 characters for the product."); // Display alert if less than 12 characters
      return;
    }
    submitForm();
  });

  // Function to submit the form
  function submitForm() {
    const productData = productField.value.trim(); // Trim any leading/trailing spaces
    
    sessionStorage.setItem("product", productData);
    
    // Redirect to results page with query parameter
    window.location.href = `results.html?pasta_selection=${productData}`;
  }
</script>
